示例程序
========================
本章将介绍Sentry视觉传感器的应用方法  


基础例程
-----------------------
本套例程介绍了各算法的基本调用方式和处理方法，在每个例程中添加有注释说明，用于解释其工作原理。
为了便于理解，本套例程设计的相对较为简单、易用、易懂，目的是指导用户如何使用Sentry系列视觉模块，
如：如何判断方位，如何判断距离，如何利用分类标签，如何控制车子，如何控制舵机，如何降低干扰，如何只检测一次物体，如何处理多个结果等。
用户理解了这些基础操作后，便可以设计出更加丰富多彩的综合性应用。

​本套例程采用micro:bit作为主控，其他主控平台具有类似的编程思路和方法。部分例程需配合麦昆小车，舵机等外设。

例程之间具有一定的通用性，即某个例程所介绍的方法也会适用于其他的算法。例程链接为makecode官方的发布链接，但当例程更新后，其地址可能会发生变化或失效。


颜色识别 - Color
************************

积木计数器
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
示例简介：
当Sentry检测到红色的积木块，检测数量会不断的累计，并在屏幕上进行显示。当按下microbit上的按键A时，统计数值将会清零。

程序链接：https://makecode.microbit.org/_F1ACE27EbdHj


乐高图案扫描
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
示例简介：
Sentry设置为5x5的检测矩阵，用乐高积木搭建一个5x5的像素图案，比如爱心，背景用白色乐高板，图案用2x2的红色小颗粒。将Sentry的检测点与乐高图案的5x5像素图案对齐。如果Sentry的某个点位识别到了红色积木，则会点microbit中对应位置的LED，即将乐高图案扫描到了点阵屏上。

程序链接：https://makecode.microbit.org/_WwRhwPWECgCJ


纸带八音盒
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
Sentry设置为1x10的检测线阵，在纸带上画出乐谱，要求如下：
纸带为白色，乐谱为一行行的红色点位图，可以画一个实心圆表示，每行有1+8个点位可以画，（第10个检测点位没有使用）。其中每行的第一个点位为节拍符，每行必须都有，用于告诉Sentry这是新的一行乐谱，后面8个为音符，分别为音乐简谱的1.2.3.4.5.6.7.和高1。按照歌谱在对应的音符上图上实心的圆（同一行中不支持两个音符同时发音）。画完后，将Sentry的识别区域对准色带中的第一行，然后匀速的移动色带，Sentry开始依次识别每一行的音符并通过microbit播放

程序链接：https://makecode.microbit.org/_Xzg49CTugiRq



色块检测 - Blob
************************

红绿灯识别
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
Sentry设置为同时检测红色和绿色色块。为了排除周围环境干扰，需要对检测到的结果方位进行判断，只有位于图像上方中间区域的红绿色块才有可能是红绿灯所发出的颜色。识别到红灯，显示一个囧脸图案，如果是绿灯，显示一个笑脸图案

程序链接：https://makecode.microbit.org/_XiU7XKKRfH4Y


小车踢球
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
Sentry通过检测色块来简介的检测皮球（需要使用只有一种颜色的皮球，不能为彩色球，本例用蓝色的皮球），识别到皮球后，根据横向坐标来判断左右方位，控制麦昆小车的转向或前进。皮球不能太小。

程序链接：https://makecode.microbit.org/_4KmJqf2C9eMK


双轴舵机云台
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
Sentry通过检测色块的坐标来控制双轴舵机云台对其定位跟踪，本例采用绿色的色卡，需要对色块的横向坐标和纵向坐标都进行判断，同时需要对舵机当前角度位置进行记录。当色块偏离中心区域时，需要根据控制舵机向偏离方向每次转动一点的角度逐步的逼近。

程序链接：https://makecode.microbit.org/_JrdT0vA6yLMr


小车巡线-基于色块检测
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
基于色块检测可以实现小车巡线，适用于较粗的单线道路或者具有两侧边界的模拟真实场景的道路。假设线路为黑色，那么算法设置中需要检测黑色色块，根据黑色色块的方位来判断道路的偏移情况，若方块位于左侧，则表明道路开始左转，右侧则右转，中间则为直行道路。

程序链接：https://makecode.microbit.org/_CmzWCjboEUr1



标签识别 - Apriltag
************************

定位系统
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
检测一个Apriltag标签，根据其横向坐标、纵向坐标判断其相对于Sentry的位置，并在点阵屏上显示一个箭头指向这个标签。随着Sentry的移动，箭头的位置也在不断的改变，当移动到标签的正上方时，将会根据其高度或宽度判断远近距离，用不同大小的菱形图案进行表示。

程序链接：https://makecode.microbit.org/_Ehp08kL6Hg0U



物品分拣装置
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
在物品上贴上不同的Apriltag标签，当识别结果为1时，控制舵机将其推至左侧，识别结果为2则推至右侧，若为其他的标签值，则发出报警并显示一个“X”号。

程序链接：https://makecode.microbit.org/_5Usa8WhF75y4



线条检测 - Line
************************

小车巡线-单线-坐标控制
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
控制小车子在连续的黑色线路上行进，将横向坐标分为5个区域，从左到右依次为1，2，3，4，5。区域3为直行，2为稍微左转，3为稍微右转，1为较大的左转，5为较大的右转。通过实时检测线段坐标位置来调整车轮行进方式。

程序链接：https://makecode.microbit.org/_h7X8PKHELR01


小车巡线-单线-PID控制
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
在白色纸张上用较粗的黑彩笔画上线路，通过PID算法控制小车子行进。

程序链接：https://makecode.microbit.org/_1RxT3x8jEbKt

小车巡线-单线-角度控制
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
在白色纸张上用较粗的黑彩笔画上线路，通过识别线段的倾斜角度来判断线路的走向，90°为前行，小于90°需要右转，大于90°需要左转。为了具有更细腻的移动效果，对0~180°划分了7个判断区间，每个区间控制电机的转速和幅度是不一样的，在90°附近则是小转弯，而在0°或180°附近则是急转弯。

程序链接：https://makecode.microbit.org/_791aFkPfTM83


水平尺
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：

通过测量线段的角度，在点阵屏上画出与之对应的倾斜的线条，背景中不能有其他线段的干扰，最好为白纸上的黑线。

程序链接：https://makecode.microbit.org/_ffYiMagza07W



深度学习 - Learning
************************

手写数字识别
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
在白纸上手写1，2，3的数字，数字适当大一点，不宜太小。依次进行拍照训练，要求训练标签1对应数字1，标签2对应数字2，标签3对应数字3，训练完后再执行此程序。将Sentry去识别所训练过的手写数字，将识别结果显示到点阵屏上。

程序链接：https://makecode.microbit.org/_329H7rM6fg6s



智能垃圾桶
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
提前训练好不同的垃圾图案，比如训练标签1对应香蕉皮，标签2为鱼骨头，标签3为瓶子，标签4为纸壳等。训练完成后再执行该程序，当Sentry识别到香蕉皮和鱼骨头的图案时，会显示对勾图标，表明是厨余垃圾，识别到瓶子和纸壳时则显示叉号，表明不是厨余垃圾，检测到其他的标签，则为未知物体，显示一个问号。

程序链接：https://makecode.microbit.org/_ebqAWRHLcYwH



卡片识别 - Card
************************

无人驾驶-基于交通卡片
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
通过交通卡片控制小车子的行驶，包括前行、左转、右转、掉头、停止。

程序链接：https://makecode.microbit.org/_ac2HTw0mbcjD



拍照解题
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
水平放置3个卡片，第1张和第3张为单个数字卡片，中间第2张为运算符加减乘除“+ - * /”的卡片，比如“2”“+”“7”。将这三张卡片全部位于Sentry的视野之内，然后按下microbit的按键A，此时开始计算这个数学题，并将检测到的卡片内容和计算结果显示在点阵屏上：“2+7=9”

程序链接：https://makecode.microbit.org/_5bsKVAPEuFjh



人脸识别 - Face
************************

智能门禁
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
提前训练人脸模型，然后再执行这个代码。当Sentry检测到标签ID为1的人脸时，则控制舵机旋转开门，否则关上门。

程序链接：https://makecode.microbit.org/_AthCXy1KsCTa



坐姿监测
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
通过人脸方位的横向坐标和纵向坐标来判断坐姿是否端正，通过人脸宽度来判断是否太靠近桌子或距离较远，如果坐姿不合要求，则发出提示音，并将当前位置显示在点阵屏上，便于用户调整坐姿。

程序链接：https://makecode.microbit.org/_3Tyb6dcXkApC



20类物体 - 20Class
************************

交通协管员
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
对机动车道进行监视，如果发现行人或自行车，则发出提示警告。为了安全起见，本案例用人、自行车、汽车的卡片进行模拟实验，不要在真实道路进行测试。

程序链接：https://makecode.microbit.org/_itwRcE4XFUou



车流量监控
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
对小汽车进行流量计数统计，为了增加准确性，采取了消抖措施，只有检测到5次小汽车时才会计数加1，且当5次未检测到小汽车时才会进行下一次的计数，此方法可以避免对同一辆小汽车的重复计数。为安全起见，此案例采用小汽车卡片进行虚拟测试，请不要在马路上进行测试。

程序链接：https://makecode.microbit.org/_CU5YiahraVb0



二维码 - QRCode
************************

二维码扫描仪
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
用在线二维码生成器制作一个简单的字符串二维码，Sentry识别后将字符串打印在点阵屏上

程序链接：https://makecode.microbit.org/_Hmdf16DzJDkK



二维码指令
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
用在线二维码生成器制作带有指令含义的二维码，如“screen on”，“screen off”，“speaker on”，“speaker off”，当Sentry识别到这些二维码后，分别控制屏幕的开启和关闭，扬声器的开启和关闭，实现指令控制的功能

程序链接：https://makecode.microbit.org/_aYyYmU74yJwD



运动物体 - Motion
************************

凌空乐器
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
将图像上半部分平均分为10个区间，编号为0~9，移动手指来触发移动检测，当编号1~8的区域检测到移动发生时，分别发出1，2，3，4，5，6，7，高1的音符（简谱），而0和9不发音，用于排除边界干扰。若移动区域发生在图像的下半区域则不发音。

程序链接：https://makecode.microbit.org/_DpbXuXTwwKJt



划动手势控制
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

示例简介：
Sentry面向一个相对静止的区域，背景中没有移动的物体，将手指放于Sentry前，当手指向下划动时，在点阵屏上显示向下的箭头，当手指向上滑动时，显示向上的箭头

程序链接：https://makecode.microbit.org/_H6pM6gFqLMtj



WiFi例程
-----------------------

:ref:`详见WiFi介绍章节中的例程<chapter_wifi_demo_index>`  


